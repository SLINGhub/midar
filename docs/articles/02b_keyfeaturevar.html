<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Feature Variables in MiDAR • midar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Feature Variables in MiDAR">
<meta name="description" content="MiDAR: Postprocessing and Quality Control of Small-Molecule Mass Spectrometry Data
">
<meta property="og:description" content="MiDAR: Postprocessing and Quality Control of Small-Molecule Mass Spectrometry Data
">
<meta property="og:image" content="https://slinghub.github.io/midar/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">midar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/00_get_started.html">Getting started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials-recipes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials &amp; Recipes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials-recipes">
<li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/T01_prepdata.html">Preparing and importing data</a></li>
    <li><a class="dropdown-item" href="../articles/T02_settingup_workflow.html">Setting Up a Basic MiDAR Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/T01_targetlipidomics_workflow.html">Targeted lipidomics with QC</a></li>
    <li><a class="dropdown-item" href="../articles/T_DriftCorrect.html">Drift Correction</a></li>
    <li><a class="dropdown-item" href="../articles/T_BatchCorrect.html">Batch Correction</a></li>
    <li><a class="dropdown-item" href="../articles/T_CalibRef.html">Calibration by a Reference Sample</a></li>
    <li><a class="dropdown-item" href="../articles/R01_quantms.html">External Calibration and QC</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Recipes</h6></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-manual" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Manual</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-manual">
<li><h6 class="dropdown-header" data-toc-skip>Key Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/01_datastructure.html">Data Structures</a></li>
    <li><a class="dropdown-item" href="../articles/02_keydataids.html">Data Indentifier</a></li>
    <li><a class="dropdown-item" href="../articles/02b_keyfeaturevar.html">Feature Variables</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data and Metadata</h6></li>
    <li><a class="dropdown-item" href="../articles/03_midarexperiment.html">MidarExperiment Object</a></li>
    <li><a class="dropdown-item" href="../articles/04_dataimport.html">Data Import</a></li>
    <li><a class="dropdown-item" href="../articles/05_metadataimport.html">Metadata Import</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/07_driftbatchcorr.html">Batch/Drift Correction</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SLINGhub/midar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Feature Variables in MiDAR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/SLINGhub/midar/blob/HEAD/vignettes/articles/02b_keyfeaturevar.Rmd" class="external-link"><code>vignettes/articles/02b_keyfeaturevar.Rmd</code></a></small>
      <div class="d-none name"><code>02b_keyfeaturevar.Rmd</code></div>
    </div>

    
    
<p>Feature variables represent variables that store values that are
associated with a feature in a specific sample. The describe e.g., the
absolute or relative abundance, the chromatographic retention time, the
peak shape, or especially when also processed data are imported, also
properties like measurement accuracy.</p>
<p>The feature variables can be accessed in MiDAR functions by either
their internal name, which always starts with <code>feature_</code>
(e.g., <code>feature_intensity</code>) or by their short names, such as
<code>conc</code>, <code>intensity</code>, <code>norm_intesity</code>,
and <code>rt</code>.</p>
<div class="section level2">
<h2 id="key-feature-variables">Key Feature Variables<a class="anchor" aria-label="anchor" href="#key-feature-variables"></a>
</h2>
<p>Following feature variables are essential for organizing the data
processing flow in <code>MiDAR</code>. The <code>intensity</code>
variable corresponds to the raw signal (e.g. peak area) of the analysis,
which are retrieved from one of the original feature variables (see
below) All feature variables downstream are the result of data
processing, including those available in the MiDAR workflow. If raw,
partial or fully post-processed data is imported into MiDAR, e.g. via
<code><a href="../reference/import_data_csv.html">import_data_csv()</a></code>, the imported values must be assigned or
match these variables names.</p>
<p>Many data processing and plotting functions in MiDAR use of these
variables as input variable. All of these variable are stored in the
<code>dataset</code> table present in the <code>MidarExperiment</code>
object.</p>
<table style="width:98%;" class="table">
<colgroup>
<col width="25%">
<col width="28%">
<col width="41%">
<col width="1%">
</colgroup>
<thead><tr class="header">
<th>Variable Short Name</th>
<th>Internal Name</th>
<th>Description</th>
<th></th>
</tr></thead>
<tbody>
<tr class="odd">
<td>intensity</td>
<td>feature_intensity</td>
<td>Raw signal intensity. A copy of either <code>area</code>,
<code>height</code>, <code>response</code>, or <code>intensity</code>
from the imported raw data. See below.</td>
<td></td>
</tr>
<tr class="even">
<td>nom_intensity</td>
<td>fe ature_norm_intensity</td>
<td>Internal Standard-normalized raw signal intensity</td>
<td></td>
</tr>
<tr class="odd">
<td>pmol_total</td>
<td>feature_pmol_total</td>
<td>Total feature (analyte) amount in the measured sample
(pmoles/sample)</td>
<td></td>
</tr>
<tr class="even">
<td>conc</td>
<td>feature_conc</td>
<td>Feature (analyte) concentration</td>
<td></td>
</tr>
<tr class="odd">
<td>conc_normalized</td>
<td>fea ture_conc_normalized</td>
<td>Normalized feature (analyte) concentration normalized by
e.g. reference sample or other normalization methods</td>
<td></td>
</tr>
<tr class="even">
<td>conc_bias</td>
<td colspan="3">feature_conc_ratio | The ratio of measured and |
expected/known feature | | concentration defined a | | reference sample.
The variable | | is generated by the function | |
<code><a href="../reference/calibrate_by_reference.html">calibrate_by_reference()</a></code> in | | case of absolute
calibration. |</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="backup-feature-variables">Backup Feature Variables<a class="anchor" aria-label="anchor" href="#backup-feature-variables"></a>
</h2>
<p>Feature variables will be overwritten in some processing by
re-calculated values, i.e., feature area after interference correction,
concentrations after drift/batch correction or reference sample-based
re-calibration. In these cases, the original feature values are stored
in a new ‘backup’ feature variable to keep a record and allow exploring
the variable at a later stage. Furthermore, specific variables are
created by some processing functions, e.g. during drift correction the
values of the curve (model fit) data points.</p>
<p>Also these variables are stored in the <code>dataset</code> table.
The feature variable name is based on the initial name with following
postfixes:</p>
<table style="width:99%;" class="table">
<colgroup>
<col width="22%">
<col width="22%">
<col width="53%">
</colgroup>
<thead><tr class="header">
<th>Postfix of Variable Name</th>
<th>Examples</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>_orig</td>
<td>feature _intensity_orig</td>
<td>Currently, only used for the backup before any interference
correction was applied. Corresponds always to the raw intensity values
that were imported into the <code>MidarExperiment</code> object.</td>
</tr>
<tr class="even">
<td>_raw</td>
<td>
<p>f eature_conc_raw</p>
<p>featur e_intensity_raw</p>
</td>
<td>Corresponds to the raw (= uncorrected) calculated features values,
i.e., before a new correction step was applied, such as drift/batch
correction.</td>
</tr>
<tr class="odd">
<td>_before</td>
<td>
<p>feat ure_conc_before</p>
<p>feature_i ntensity_before</p>
</td>
<td>Corresponds to the last calculated value before a new correction
step was applied, i.e., drift/batch correction. For example, adjusted
concentration after a drift correction, before batch correction was
applied.</td>
</tr>
<tr class="even">
<td>_beforecal</td>
<td>feature _conc_beforecal</td>
<td>The non-calibrated raw or adjusted concentration before
`calibrate_by_reference()` was applied. Only applies to the
concentration variable</td>
</tr>
<tr class="odd">
<td>_fit</td>
<td>conc_before_fit</td>
<td>Model fit data points calculated by drift and batch correction
functions. Use by <code>runscatter()</code> to plot the trends.</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="raw-feature-variables">Raw Feature Variables<a class="anchor" aria-label="anchor" href="#raw-feature-variables"></a>
</h2>
<p>The supported feature variables listed below characterize the
features in additional aspects. Import is that only of variables can be
is used as “feature raw intensity” for all data processing steps. This
variable is then copied to <code>intensity</code> after importing the
data, by default <code>area</code> if available, or then
<code>height</code>, <code>response</code> or <code>intensity</code> in
this order. The feature variable use for <code>intensity</code> can also
manually be set via `set_intensity_var()`</p>
<p>These variables are stored in the <code>dataset_orig</code> table,
and are not being modified by any MiDAR function. They are typically not
available in MiDAR’s data processing functions, but plotting functions
support some of these. The support will be extended in upcoming
versions.</p>
<table style="width:98%;" class="table">
<colgroup>
<col width="24%">
<col width="29%">
<col width="40%">
<col width="3%">
</colgroup>
<tbody>
<tr class="odd">
<td rowspan="2">Variable Short Name =================== area</td>
<td rowspan="2">
<p>Internal Name</p>
<p>======================= feature_area</p>
</td>
<td rowspan="2">
<p>Description</p>
<p>================================ Peak area</p>
</td>
<td></td>
</tr>
<tr class="even">
<td></td>
</tr>
<tr class="odd">
<td>height</td>
<td>height_height</td>
<td>Peak height</td>
<td></td>
</tr>
<tr class="even">
<td>response</td>
<td>height_response</td>
<td>Feature response (vendor specific)</td>
<td></td>
</tr>
<tr class="odd">
<td>intensity</td>
<td>feature_intensity</td>
<td>Feature intensity (vendor specific)</td>
<td></td>
</tr>
<tr class="even">
<td>rt</td>
<td>feature_rt</td>
<td>Retention time</td>
<td></td>
</tr>
<tr class="odd">
<td>fwhm</td>
<td>feature_fwhm</td>
<td>Full Width at Half Maximum Peak Height</td>
<td></td>
</tr>
<tr class="even">
<td>width</td>
<td>feature_width</td>
<td>Peak Width</td>
<td></td>
</tr>
<tr class="odd">
<td>int_start</td>
<td>feature_int_start</td>
<td>Peak integration Start Time</td>
<td></td>
</tr>
<tr class="even">
<td>int_end</td>
<td>feature_int_end</td>
<td>Peak Integration End Time</td>
<td></td>
</tr>
<tr class="odd">
<td colspan="4">symmetry | feature_symmetry | Peak symmetry</td>
</tr>
<tr class="even">
<td>sn_ratio</td>
<td>feature_sn_ratio</td>
<td>Signal-to-Noise ratio</td>
<td></td>
</tr>
<tr class="odd">
<td>accuracy</td>
<td>feature_accuracy</td>
<td>Accuracy (often in reference to target value)</td>
<td></td>
</tr>
<tr class="even">
<td>ionratio</td>
<td>feature_ionratio</td>
<td>Ion ratio</td>
<td></td>
</tr>
</tbody>
</table>
<p>QC type is represented with a consistent color scheme (both fill and
line colors) and specific point shapes in all plots generated by the
MiDAR package. This visual coding allows consistent identification and
comparison of different QC types across various visualizations.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bo Burla.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.2.</p>
</div>

    </footer>
</div>





  </body>
</html>
