<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A basic MiDAR workflow • midar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A basic MiDAR workflow">
<meta name="description" content="MiDAR: Postprocessing and Quality Control of Small-Molecule Mass Spectrometry Data
">
<meta property="og:description" content="MiDAR: Postprocessing and Quality Control of Small-Molecule Mass Spectrometry Data
">
<meta property="og:image" content="https://slinghub.github.io/midar/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">midar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.5.9003</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/00_get_started.html">Get started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials-recipes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials/Recipes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials-recipes">
<li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/T01_prepdata.html">Preparing and importing data</a></li>
    <li><a class="dropdown-item" href="../articles/T02_settingup_workflow.html">Setting Up a Basic MiDAR Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/T01_targetlipidomics_workflow.html">Targeted lipidomics with QC</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Recipes</h6></li>
    <li><a class="dropdown-item" href="../articles/R01_quantms.html">Quantitative assay with ext. calibration and QC</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-manual" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Manual</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-manual">
<li><h6 class="dropdown-header" data-toc-skip>Key Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/01_datastructure.html">Data Structures</a></li>
    <li><a class="dropdown-item" href="../articles/02_keydataids.html">Data Indentifier</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data and Metadata</h6></li>
    <li><a class="dropdown-item" href="../articles/03_midarexperiment.html">MidarExperiment Object</a></li>
    <li><a class="dropdown-item" href="../articles/04_dataimport.html">Data Import</a></li>
    <li><a class="dropdown-item" href="../articles/05_metadataimport.html">Metadata Import</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/07_BatchDriftCorrect.html">Batch/Drift Correction</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SLINGhub/midar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>A basic MiDAR workflow</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/SLINGhub/midar/blob/HEAD/vignettes/articles/T02_settingup_workflow.Rmd" class="external-link"><code>vignettes/articles/T02_settingup_workflow.Rmd</code></a></small>
      <div class="d-none name"><code>T02_settingup_workflow.Rmd</code></div>
    </div>

    
    
<p>This tutorial outlines some key steps in a MiDAR workflow, based on a
lipidomics dataset. See the tutorial <a href="articles/T01_targetlipidomics_workflow.html">Lipidomics Data
Processing</a> for a more detailed example.</p>
<p>Keep in mind that these examples below are simplified and may not be
applicable to your data and experimental setup. Please consult other
tutorials and recipes for information on other workflows and data
types.</p>
<div class="section level2">
<h2 id="setting-up-a-rstudio-project">Setting up a RStudio project<a class="anchor" aria-label="anchor" href="#setting-up-a-rstudio-project"></a>
</h2>
<p>To start a new MiDAR data analysis, creating a RStudio project is
recommended. (See <a href="https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects" class="external-link">Using
RStudio Projects</a>). This will help to keep the data analysis
organized and makes it easier to share with others. The project should
contain the following subfolders: <code>data</code> and
<code>output</code>. Add data and metadata files to the
<code>data</code> folder.</p>
<p>Notebooks such as R/Notebook (.rmd) or <a href="https://docs.posit.co/ide/user/ide/guide/documents/quarto-project.html" class="external-link">Quarto
Notebook</a> (.qmd) are good choices to create documented data
processing workflows. These formats allow combining code with formatted
text to document the data processing steps.</p>
<p>Start with a new notebook or R script and load the <code>midar</code>
package</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SLINGhub/midar" class="external-link">midar</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="creating-a-midarexperiment-object">Creating a MidarExperiment object<a class="anchor" aria-label="anchor" href="#creating-a-midarexperiment-object"></a>
</h2>
<p>The <code>MidarExperiment</code> object is the main <strong>data
container</strong> used in the MiDAR workflow. See (The
<code>MidarExperiment</code> data
object)[articles/03_midarexperiment.html] for more information.</p>
<p>We start by creating a new <code>MidarExperiment</code> object
(<code>myexp</code>), which will be used in all subsequent steps.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MidarExperiment.html">MidarExperiment</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="importing-analysis-results">Importing analysis results<a class="anchor" aria-label="anchor" href="#importing-analysis-results"></a>
</h2>
<p>As introduced in <a href="articles/T01_prepdata.html">Preparing and
importing data</a><br>
we first import the analytical data, in this case from <a href="https://github.com/MRMkit/MRMkit" class="external-link">MRMkit</a> file. This file also
contains some metadata, such as <code>qc_type</code> and
<code>batch_id</code> (see <a href="articles/02_keydataids.html">Data
Identifiers in MiDAR</a>) which we will import as well.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_data_mrmkit.html">import_data_mrmkit</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">myexp</span>, </span>
<span>                            path <span class="op">=</span> <span class="st">"datasets/sPerfect_MRMkit.tsv"</span>, </span>
<span>                            import_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Imported 499 analyses with 503 features</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">`feature_area` selected as default feature intensity. Modify with `set_intensity_var()`.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Analysis metadata associated with 499 analyses.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Feature metadata associated with 503 features.</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="adding-metadata">Adding metadata<a class="anchor" aria-label="anchor" href="#adding-metadata"></a>
</h2>
<p>The subsequent processing steps require additional infomation that is
not available from the imported analysis data. This includes information
such as which internal standards are used to normalize, their
concentrations and the sample amounts analysed. These metadata can be
imported from separate files or R data frames as described in <a href="articles/T01_prepdata.html">Preparing and importing data</a>. To
keep the code concience in this example, we will import metadata from an
MSOrganizer template. The validation checks result in some warnings,
which will by default result in a failed metadata import. However,
assuming we understand what we are doing, we decided to ignore these
warnings by setting <code>ignore_warnings = TRUE</code>. They will still
be shown in the table printed in the console, labelled with an asterix
(*) in the <code>status</code> column.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_metadata_msorganizer.html">import_metadata_msorganizer</a></span><span class="op">(</span></span>
<span>  <span class="va">myexp</span>, </span>
<span>  path <span class="op">=</span> <span class="st">"datasets/sPerfect_Metadata.xlsm"</span>, </span>
<span>  ignore_warnings <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> <span style="color: #BBBB00;">Metadata has following warnings and notifications:</span></span></span>
<span><span class="co">#&gt; <span style="color: #000000;">--------------------------------------------------------------------------------------------</span></span></span>
<span><span class="co">#&gt;   Type Table    Column                Issue                           Count</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> W*   Analyses analysis_id           Analyses not in analysis data      15</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> W*   Features feature_id            Feature(s) not in analysis data     4</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> W*   Features feature_id            Feature(s) without metadata         1</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> W*   ISTDs    quant_istd_feature_id Internal standard(s) not used       1</span></span>
<span><span class="co">#&gt; <span style="font-style: italic;">--------------------------------------------------------------------------------------------</span></span></span>
<span><span class="co"><span style="font-style: italic;">#&gt; E = Error, W = Warning, W* = Supressed Warning, N = Note</span></span></span>
<span><span class="co"><span style="font-style: italic;">#&gt; --------------------------------------------------------------------------------------------</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Analysis metadata associated with 499 analyses.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Feature metadata associated with 502 features.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Internal Standard metadata associated with 17 ISTDs.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Response curve metadata associated with 12 annotated analyses.</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="applying-data-processing">Applying Data Processing<a class="anchor" aria-label="anchor" href="#applying-data-processing"></a>
</h2>
<p>Now we are ready to proceed with data processing. In this example we
will employ some basic data processing steps, whereby the corresponding
code should be self explanatory. At the end of this code block we also
set criteria based on which features are filtered on demand later in the
workflow.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/normalize_by_istd.html">normalize_by_istd</a></span><span class="op">(</span><span class="va">myexp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> <span style="color: #BBBB00;">Interfering features defined in metadata, but no correction was applied. Use `correct_interferences()` to correct.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">460 features normalized with 17 ISTDs in 499 analyses.</span></span></span>
<span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/quantify_by_istd.html">quantify_by_istd</a></span><span class="op">(</span><span class="va">myexp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">460 feature concentrations calculated based on 42 ISTDs and sample amounts of 499 analyses.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #00BB00;">Concentrations are given in μmol/L.</span></span></span>
<span></span>
<span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/correct_drift_gaussiankernel.html">correct_drift_gaussiankernel</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">myexp</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"conc"</span>,</span>
<span>  ref_qc_types <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SPL"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #00BB00;">Applying `conc` drift correction...</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #BBBB00;">2 feature(s) contain one or more zero or negative `conc` values. Verify your data or use `log_transform_internal = FALSE`.</span></span></span>
<span><span class="co">#&gt;   |                                                    |                                            |   0%  |                                                    |=                                           |   2%  |                                                    |==                                          |   4%  |                                                    |===                                         |   6%  |                                                    |====                                        |   8%  |                                                    |====                                        |  10%  |                                                    |=====                                       |  12%  |                                                    |======                                      |  14%  |                                                    |=======                                     |  16%  |                                                    |========                                    |  18%  |                                                    |=========                                   |  20%  |                                                    |==========                                  |  22%  |                                                    |===========                                 |  24%  |                                                    |============                                |  26%  |                                                    |============                                |  28%  |                                                    |=============                               |  30%  |                                                    |==============                              |  32%  |                                                    |===============                             |  34%  |                                                    |================                            |  37%  |                                                    |=================                           |  39%  |                                                    |==================                          |  41%  |                                                    |===================                         |  43%  |                                                    |====================                        |  45%  |                                                    |=====================                       |  47%  |                                                    |=====================                       |  49%  |                                                    |======================                      |  51%  |                                                    |=======================                     |  53%  |                                                    |========================                    |  55%  |                                                    |=========================                   |  57%  |                                                    |==========================                  |  59%  |                                                    |===========================                 |  61%  |                                                    |============================                |  63%  |                                                    |=============================               |  65%  |                                                    |=============================               |  67%  |                                                    |==============================              |  69%  |                                                    |===============================             |  71%  |                                                    |================================            |  73%  |                                                    |=================================           |  75%  |                                                    |==================================          |  77%  |                                                    |===================================         |  79%  |                                                    |====================================        |  81%  |                                                    |=====================================       |  83%  |                                                    |=====================================       |  85%  |                                                    |======================================      |  87%  |                                                    |=======================================     |  89%  |                                                    |========================================    |  91%  |                                                    |=========================================   |  93%  |                                                    |==========================================  |  95%  |                                                    |=========================================== |  97%  |                                                    |============================================|  99%  |                                                    |============================================| 100%<span style="color: #00BB00;"> - trend smoothing done!</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> <span style="color: #BBBB00;">1 features showed no variation in the study sample's original values across analyses. </span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> <span style="color: #BBBB00;">1 features have invalid values after smoothing. NA will be be returned for all values of these faetures. Set `use_original_if_fail = FALSE to return orginal values..</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Drift correction was applied to 459 of 460 features (batch-wise).</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">The median CV change of all features in study samples was </span><span style="color: #555555; font-weight: bold;">-0.56%</span><span style="color: #555555;"> (range: -10.22% to 2.49%). The median absolute CV of all features across batches </span><span style="color: #555555; font-weight: bold;">decreased from</span><span style="color: #555555;"> </span><span style="color: #555555; font-weight: bold;">38.96% to 38.56%</span><span style="color: #555555;">.</span></span></span>
<span></span>
<span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu">midar</span><span class="fu">::</span><span class="fu"><a href="../reference/correct_batch_centering.html">correct_batch_centering</a></span><span class="op">(</span></span>
<span>  <span class="va">myexp</span>, </span>
<span>  variable <span class="op">=</span> <span class="st">"conc"</span>,</span>
<span>  ref_qc_types <span class="op">=</span> <span class="st">"SPL"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #BBBB00;">Adding batch correction on top of `conc` drift-correction.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Batch median-centering of 6 batches was applied to drift-corrected concentrations of all 460 features.</span></span></span>
<span><span class="co">#&gt; <span style="color: #00BBBB;">ℹ</span> <span style="color: #555555;">The median CV change of all features in study samples was </span><span style="color: #555555; font-weight: bold;">-0.50%</span><span style="color: #555555;"> (range: -27.90% to 10.30%).  The median absolute CV of all features </span><span style="color: #555555; font-weight: bold;">decreased from</span><span style="color: #555555;"> </span><span style="color: #555555; font-weight: bold;">39.89% to 39.46%</span><span style="color: #555555;">.</span></span></span>
<span></span>
<span><span class="va">myexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/filter_features_qc.html">filter_features_qc</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">myexp</span>,</span>
<span>  include_qualifier <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  include_istd <span class="op">=</span> <span class="cn">FALSE</span>, </span>
<span>  min.signalblank.median.spl.sblk <span class="op">=</span> <span class="fl">10</span>,</span>
<span>  max.cv.conc.bqc <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span>
<span><span class="co">#&gt; Calculating feature QC metrics - please wait...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">New feature QC filters were defined: 182 of 423 quantifier features meet QC criteria (not including the 25 quantifier ISTD features).</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="plotting-data">Plotting data<a class="anchor" aria-label="anchor" href="#plotting-data"></a>
</h2>
<p>MiDAR provides various plot function that can be useful in
understanding analytical performance, trends and isses in the data.
Plots are also available to inspect the effect of data processing
(e.g. drift/bath-effect correction) and QC-based feature filtering.</p>
<p>Below we create a <code>runscatter</code> plot to visualize the
concentration of specific features across the analytical series in
different QC sample types. The plot can also be saved to a PDF file.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>  <span class="fu"><a href="../reference/plot_runscatter.html">plot_runscatter</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">myexp</span>,</span>
<span>    variable <span class="op">=</span> <span class="st">"conc"</span>,</span>
<span>    include_feature_filter <span class="op">=</span> <span class="st">"PC 4"</span>,</span>
<span>    include_istd <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    cap_outliers <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>    log_scale <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    output_pdf <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>    path <span class="op">=</span> <span class="st">"./output/runscatter_PC408_beforecorr.pdf"</span>,</span>
<span>    cols_page <span class="op">=</span> <span class="fl">3</span>, rows_page <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">Generating plots (1 page)...</span></span></span></code></pre></div>
<p><img src="T02_settingup_workflow_files/figure-html/unnamed-chunk-4-1.png" alt="RunScatter plot with 2x3 panels" width="100%"></p>
<pre><code><span><span class="co">#&gt; <span style="color: #00BB00;"> - done!</span></span></span></code></pre>
</div>
<div class="section level2">
<h2 id="exporting-and-sharing-data">Exporting and sharing data<a class="anchor" aria-label="anchor" href="#exporting-and-sharing-data"></a>
</h2>
<p>Finally, we can export specific datasets as plain csv tables, create
a detailed data report, and share the entire
<code>MidarExperiment</code> object with someone else without any code,
who can run own data processing, plots and QC checks.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Saves a detailed report in Excel format with multiple sheets</span></span>
<span><span class="fu">midar</span><span class="fu">::</span><span class="fu"><a href="../reference/save_report_xlsx.html">save_report_xlsx</a></span><span class="op">(</span><span class="va">myexp</span>, path <span class="op">=</span> <span class="st">"./output/myexp-midar_report.xlsx"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Saving report to disk - please wait...</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">The data processing report has been saved to './output/myexp-midar_report.xlsx'.</span></span></span>
<span></span>
<span><span class="co"># Saves flat csv table with concentration values that passed the previously set</span></span>
<span><span class="co"># QC criteria, for each feature in each sample. </span></span>
<span><span class="fu">midar</span><span class="fu">::</span><span class="fu"><a href="../reference/save_dataset_csv.html">save_dataset_csv</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">myexp</span>, </span>
<span>  path <span class="op">=</span> <span class="st">"./output/sperfect_filt_uM.csv"</span>,</span>
<span>  variable <span class="op">=</span> <span class="st">"conc"</span>, </span>
<span>  qc_types <span class="op">=</span> <span class="st">"SPL"</span>, </span>
<span>  include_qualifier <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  filter_data <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #00BB00;">✔</span> <span style="color: #00BB00;">Concentration values for 378 analyses and 182 features have been exported to './output/sperfect_filt_uM.csv'.</span></span></span>
<span></span>
<span><span class="co"># Saves the entire MidarExperiment object as an RDS file, which can be</span></span>
<span><span class="co"># opened in R without MiDAR or used with MiDAR again.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">myexp</span>, file <span class="op">=</span> <span class="st">"./output/myexp-midar.rds"</span>, compress <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bo Burla.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
