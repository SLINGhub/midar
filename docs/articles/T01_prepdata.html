<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Preparing and importing data â€¢ midar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preparing and importing data">
<meta name="description" content="MiDAR: postprocessing and quality control of small molecule mass spectrometry data
">
<meta property="og:description" content="MiDAR: postprocessing and quality control of small molecule mass spectrometry data
">
<meta property="og:image" content="https://slinghub.github.io/midar/logo.svg">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">midar</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.6</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/00_get_started.html">Getting started</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-tutorials-recipes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Tutorials &amp; Recipes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-tutorials-recipes">
<li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/T01_prepdata.html">Preparing and importing data</a></li>
    <li><a class="dropdown-item" href="../articles/T02_settingup_workflow.html">Setting Up a Basic MiDAR Workflow</a></li>
    <li><a class="dropdown-item" href="../articles/T01_targetlipidomics_workflow.html">Targeted lipidomics with QC</a></li>
    <li><a class="dropdown-item" href="../articles/T_DriftCorrect.html">Drift Correction</a></li>
    <li><a class="dropdown-item" href="../articles/T_BatchCorrect.html">Batch Correction</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Recipes</h6></li>
    <li><a class="dropdown-item" href="../articles/R01_quantms.html">External Calibration and QC</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-manual" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Manual</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-manual">
<li><h6 class="dropdown-header" data-toc-skip>Key Concepts</h6></li>
    <li><a class="dropdown-item" href="../articles/01_datastructure.html">Data Structures</a></li>
    <li><a class="dropdown-item" href="../articles/02_keydataids.html">Data Indentifier</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Data and Metadata</h6></li>
    <li><a class="dropdown-item" href="../articles/03_midarexperiment.html">MidarExperiment Object</a></li>
    <li><a class="dropdown-item" href="../articles/04_dataimport.html">Data Import</a></li>
    <li><a class="dropdown-item" href="../articles/05_metadataimport.html">Metadata Import</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><a class="dropdown-item" href="../articles/07_driftbatchcorr.html">Batch/Drift Correction</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/SLINGhub/midar/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Preparing and importing data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/SLINGhub/midar/blob/HEAD/vignettes/articles/T01_prepdata.Rmd" class="external-link"><code>vignettes/articles/T01_prepdata.Rmd</code></a></small>
      <div class="d-none name"><code>T01_prepdata.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="analytical-data">Analytical Data<a class="anchor" aria-label="anchor" href="#analytical-data"></a>
</h2>
<p>Analytical data, such as preprocessed measurement data (e.g., peak
areas), can be imported from various software platforms.
<code>MiDAR</code> currently supports data import from <a href="https://github.com/MRMkit/MRMkit" class="external-link">MRMkit</a>, Agilent MassHunter
Quantitative Analysis (CSV files), MRMkit, and generic CSV files.</p>
<p>When importing data files generated by these platforms, it is
important not to manually edit the files before importing. Manual edits
can lead to file corruption or accidental errors in the data. MiDAR
emphasizes reproducible and automated workflows, so manual editing of
data is discouraged.</p>
<p>When importing data files generated by the supported platforms, it is
important not to manually edit these files before importing them into
MiDAR. This because this can easily lead to corrupt files that cannot be
imported, or to accidential errors in the data. MiDAR emphasis
reproducible/automated workflows, thus manual editing of data would be
against this approach.</p>
<p>Two examples of how to import data from MRMkit and a plain CSV table
with peak areas:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/SLINGhub/midar" class="external-link">midar</a></span><span class="op">)</span></span>
<span><span class="co"># Add analysis data from file generated by MRMkit</span></span>
<span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MidarExperiment.html">MidarExperiment</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_data_mrmkit.html">import_data_mrmkit</a></span><span class="op">(</span><span class="va">mexp</span>, </span>
<span>                           path <span class="op">=</span> <span class="st">"datasets/sPerfect_MRMkit.tsv"</span>, </span>
<span>                           import_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add analysis data from a CSV file (replaces all previous data)</span></span>
<span><span class="va">mexp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/MidarExperiment.html">MidarExperiment</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mexp2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_data_csv.html">import_data_csv</a></span><span class="op">(</span><span class="va">mexp</span>, </span>
<span>                        path <span class="op">=</span> <span class="st">"data/plain_wide_dataset.csv"</span>, </span>
<span>                        variable_name <span class="op">=</span> <span class="st">"area"</span>,</span>
<span>                        import_metadata <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>See <a href="articles/04_dataimport.html">Importing analytical
data</a> for more details on importing analysis data.</p>
</div>
<div class="section level2">
<h2 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h2>
<p>Metadata, refering to analysis metadata, i.e., data that
describe/annotates the analytical data at analysis/sample and feature
level, are essential data in the MiDAR workflow.</p>
<p>Metadata can be retrieved from the imported analysis data file as far
as available. More commonly, additional or all required metadata needs
to be important from other sources. Which metadata tables are required
depends on the intended processing workflow, see <a href="articles/01_datastructure.html">Data and Metadata in MiDAR</a> for
an overview of metadata categories.</p>
<p>Integrity of metadata and data is key for accurate and reproducible
data processing. MiDAR therefore inspects imported data/metadata for
completeness of data and consistency of IDs used across different
metadata tables. A summary of identified error, warnings and notes
concerning metadata is provided after import.</p>
<div class="section level3">
<h3 id="preparing-metadata">Preparing metadata<a class="anchor" aria-label="anchor" href="#preparing-metadata"></a>
</h3>
<p>Metadata can be imported from Excel Sheets, CSV files, or R data
frames. Furthermore, a specific metadata template file can be used to
prepare metadata in a structured way.</p>
<p>Preparation of metadata is often a manual step, where the information
is collected from various sources. To facilitate this process, MiDAR
provides metadata templates in Excel format. These templates contain
column headers and instructions on how on how to use. In the beginning,
it is recommended to start from a metadata template and fill in the
required information. Templates for all metadata types supported by
MiDAR can be obtained via:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">midar</span><span class="fu">::</span><span class="fu"><a href="../reference/save_metadata_templates.html">save_metadata_templates</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="importing-metadata">Importing metadata<a class="anchor" aria-label="anchor" href="#importing-metadata"></a>
</h3>
<p>Specific metadata can be imported table by table, from CSV files:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_metadata_analyses.html">import_metadata_analyses</a></span><span class="op">(</span><span class="va">mexp</span>, </span>
<span>                                 path <span class="op">=</span> <span class="st">"datasets/analysis_metadata.csv"</span>, </span>
<span>                                 excl_unmatched_analyses <span class="op">=</span> <span class="cn">TRUE</span>, </span>
<span>                                 ignore_warnings <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_metadata_features.html">import_metadata_features</a></span><span class="op">(</span><span class="va">mexp</span>, </span>
<span>                                 path <span class="op">=</span> <span class="st">"datasets/feature_metadata.csv"</span>,</span>
<span>                                 ignore_warnings<span class="op">=</span> <span class="cn">TRUE</span> <span class="op">)</span></span></code></pre></div>
<p>Metadata can also be obtained from Excel workbook sheets, which
allows to store all metadata in one file.<br>
In this case below we add metadata on internal standard and response
curves to the MidarExperiment object</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_metadata_istds.html">import_metadata_istds</a></span><span class="op">(</span><span class="va">mexp</span>, </span>
<span>                              path <span class="op">=</span> <span class="st">"datasets/metadata_tables.xlsx"</span>, </span>
<span>                              sheet <span class="op">=</span> <span class="st">"ISTDs"</span>,</span>
<span>                              ignore_warnings<span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Lastly, metadata can be obtained directly from R
<code>data.frame</code> objects, allowing users to prepare metadata in R
or to obtain them from, e.g., databases or a LIMS. Below we import
metadata on quality control samples:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">df_qcinfo</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_table.html" class="external-link">read_table</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"datasets/qc_metadata.txt"</span><span class="op">)</span></span>
<span><span class="va">mexp</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_metadata_qcconcentrations.html">import_metadata_qcconcentrations</a></span><span class="op">(</span><span class="va">mexp</span>, table <span class="op">=</span> <span class="va">df_qcinfo</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="preparing-and-importing-metadata-using-the-msorganiser-file-template">Preparing and Importing metadata using the MSOrganiser file
template<a class="anchor" aria-label="anchor" href="#preparing-and-importing-metadata-using-the-msorganiser-file-template"></a>
</h2>
<p>Another option to import metadata is via the â€˜MiDAR MSOrganzierâ€™
template, an macro-enabled Excel file. See <a href="articles/05_metadataimport.Rmd.html">Metadata import</a>.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Bo Burla.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
